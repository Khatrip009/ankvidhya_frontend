import{r as o,j as e}from"./vendor.react-Dp9iUKRz.js";import{a as v,F as ke,S as te,C as Me,b as h,T as y,c as q,d as Ee,e as Ie,f as Pe,g as qe,P as Le,D as De}from"./index-CzBxyUKB.js";import"./vendor-Czq_RlNT.js";import"./vendor.recharts-CnlMiFQ2.js";const ae=20,ze=["","new","contacted","qualified","converted","lost"];function F({name:c,className:f="h-4 w-4 inline-block mr-2"}){const m={className:f,"aria-hidden":!0};switch(c){case"search":return e.jsxs("svg",{...m,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[e.jsx("path",{d:"M21 21l-4.35-4.35",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"11",cy:"11",r:"6",strokeWidth:"1.5"})]});case"download":return e.jsxs("svg",{...m,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[e.jsx("path",{d:"M12 3v12",strokeWidth:"1.5"}),e.jsx("path",{d:"M8 11l4 4 4-4",strokeWidth:"1.5"}),e.jsx("path",{d:"M5 21h14",strokeWidth:"1.5"})]});case"upload":return e.jsxs("svg",{...m,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[e.jsx("path",{d:"M12 21V7",strokeWidth:"1.5"}),e.jsx("path",{d:"M7 11l5-5 5 5",strokeWidth:"1.5"}),e.jsx("path",{d:"M5 21h14",strokeWidth:"1.5"})]});case"plus":return e.jsx("svg",{...m,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{d:"M12 5v14M5 12h14",strokeWidth:"1.5",strokeLinecap:"round"})});case"view":return e.jsxs("svg",{...m,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[e.jsx("path",{d:"M2 12s4-7 10-7 10 7 10 7-4 7-10 7S2 12 2 12z",strokeWidth:"1.4"}),e.jsx("circle",{cx:"12",cy:"12",r:"3",strokeWidth:"1.4"})]});case"edit":return e.jsxs("svg",{...m,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[e.jsx("path",{d:"M3 21v-3.75L14.06 6.19a2 2 0 0 1 2.83 0l1.92 1.92a2 2 0 0 1 0 2.83L7.77 21H3z",strokeWidth:"1.3"}),e.jsx("path",{d:"M14 7l3 3",strokeWidth:"1.3",strokeLinecap:"round"})]});case"delete":return e.jsxs("svg",{...m,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[e.jsx("path",{d:"M3 6h18M8 6v14a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V6",strokeWidth:"1.3"}),e.jsx("path",{d:"M10 11v6M14 11v6",strokeWidth:"1.3",strokeLinecap:"round"})]});default:return null}}function K(c){if(!c)return"—";try{return new Date(c).toLocaleString()}catch{return c}}function Fe(c=[]){if(!c||!c.length)return"";const f=Object.keys(c[0]),m=u=>{if(u==null)return"";const j=String(u);return j.includes(",")||j.includes('"')||j.includes(`
`)?`"${j.replace(/"/g,'""')}"`:j},w=[f.join(",")];for(const u of c)w.push(f.map(j=>m(u[j])).join(","));return w.join(`
`)}function Be(c){const f=c.split(/\r?\n/).filter(u=>u.trim().length>0);if(!f.length)return[];const m=f.shift().split(",").map(u=>u.trim()),w=[];for(const u of f){const j=[];let S="",E=!1;for(let x=0;x<u.length;x++){const N=u[x];if(N==='"'){if(E&&u[x+1]==='"'){S+='"',x++;continue}E=!E;continue}if(!E&&N===","){j.push(S),S="";continue}S+=N}j.push(S);const I={};for(let x=0;x<m.length;x++)I[m[x]]=j[x]!==void 0?j[x]:"";w.push(I)}return w}function ne({status:c}){const f=(c||"").toString().toLowerCase(),w={new:"bg-indigo-100 text-indigo-800",contacted:"bg-yellow-100 text-yellow-800",qualified:"bg-sky-100 text-sky-800",converted:"bg-emerald-100 text-emerald-800",lost:"bg-rose-100 text-rose-800"}[f]||"bg-slate-100 text-slate-800";return e.jsx("span",{className:`inline-flex items-center text-sm font-medium px-2 py-1 rounded ${w}`,children:f||"—"})}function Ae(){const[c,f]=o.useState(""),[m,w]=o.useState(""),[u,j]=o.useState(""),[S,E]=o.useState(""),[I,x]=o.useState(1),[N,le]=o.useState(ae),[oe,G]=o.useState(!1),[B,W]=o.useState([]),[p,ie]=o.useState({page:1,pageSize:ae,total:0}),[O,Q]=o.useState({mediums:[],standards:[]}),[de,ce]=o.useState([]),[re,k]=o.useState(!1),[T,Z]=o.useState(!1),[$,J]=o.useState(null),[n,d]=o.useState({school_name:"",contact_name:"",phone:"",email:"",city:"",state:"",pincode:"",students_count:"",medium_id:"",medium_name:"",std_from_id:"",std_from_name:"",std_to_id:"",std_to_name:"",message:"",source:"website",consent:!0,assigned_to_employee_id:"",status:"new"}),[A,V]=o.useState(!1),[me,L]=o.useState(null),[X,D]=o.useState(""),[ue,R]=o.useState(!1),[i,xe]=o.useState(null),[he,Y]=o.useState(!1),[M,U]=o.useState({processed:0,total:0,errors:[]}),pe=o.useRef(null),[fe,H]=o.useState(0);o.useEffect(()=>{je(),ge(),C(1)},[]),o.useEffect(()=>{x(1),C(1)},[c,m,u,S,N]);async function je(){try{const s=await v.leads.lookups();if(s){Q({mediums:s.media||[],standards:s.standards||[]});return}}catch{}try{const s=await v.get("/api/master/lookups",{background:!0});s&&Q({mediums:s.mediums||[],standards:s.standards||[]})}catch{}}async function ge(){try{const s=await v.get("/api/employees",{query:{page:1,pageSize:500},background:!0});s&&s.data&&ce(s.data||[])}catch{}}async function C(s=1){G(!0);try{const t={page:s,pageSize:N,search:c||void 0,status:m||void 0,from:u||void 0,to:S||void 0},a=await v.get("/api/leads",{query:t});a?(W(a.data||[]),ie(a.pagination||{page:s,pageSize:N,total:a.pagination&&a.pagination.total||0})):W([])}catch(t){console.error("Fetch leads error",t),W([])}finally{G(!1)}}async function _e(){try{const s=B.map(r=>({lead_id:r.lead_id,school_name:r.school_name,contact_name:r.contact_name,phone:r.phone,email:r.email,city:r.city,state:r.state,pincode:r.pincode,students_count:r.students_count,medium:r.medium||"",std_from:r.std_from||"",std_to:r.std_to||"",message:r.message||"",status:r.status||"",created_at:r.created_at||""})),t=Fe(s),a=new Blob([t],{type:"text/csv;charset=utf-8;"}),g=URL.createObjectURL(a),b=document.createElement("a");b.href=g,b.download=`inquiries_page${p.page||1}.csv`,document.body.appendChild(b),b.click(),b.remove(),URL.revokeObjectURL(g)}catch(s){console.error(s),alert("Export failed.")}}async function ve(){Z(!1),J(null),d({school_name:"",contact_name:"",phone:"",email:"",city:"",state:"",pincode:"",students_count:"",medium_id:"",medium_name:"",std_from_id:"",std_from_name:"",std_to_id:"",std_to_name:"",message:"",source:"website",consent:!0,assigned_to_employee_id:"",status:"new"}),D(""),L(null),k(!0)}async function be(s){D(""),L(null),V(!1),Z(!0),J(s),k(!0);try{const t=await v.get(`/api/leads/${s}`),a=t&&t.data?t.data:null;a&&d({school_name:a.school_name||"",contact_name:a.contact_name||"",phone:a.phone||"",email:a.email||"",city:a.city||"",state:a.state||"",pincode:a.pincode||"",students_count:a.students_count||"",medium_id:a.medium_id||"",medium_name:a.medium||"",std_from_id:a.std_from_id||"",std_from_name:a.std_from||"",std_to_id:a.std_to_id||"",std_to_name:a.std_to||"",message:a.message||"",source:a.source||"website",consent:a.consent===!0,assigned_to_employee_id:a.assigned_to_employee_id||"",status:a.status||"new"})}catch(t){console.error("Failed to load lead",t),k(!1),alert("Failed to load record for edit.")}}async function ye(s){try{const t=await v.get(`/api/leads/${s}`),a=t&&t.data?t.data:null;a&&(xe(a),R(!0))}catch(t){console.error("Failed to load lead",t),alert("Failed to load record.")}}async function Ne(s){var a;s&&s.preventDefault(),V(!0),D(""),L(null);const t={school_name:n.school_name,contact_name:n.contact_name,phone:n.phone||"",email:n.email||"",city:n.city||"",state:n.state||"",pincode:n.pincode||"",students_count:n.students_count||"",medium_id:n.medium_id||void 0,medium_name:n.medium_name||void 0,std_from_id:n.std_from_id||void 0,std_from_name:n.std_from_name||void 0,std_to_id:n.std_to_id||void 0,std_to_name:n.std_to_name||void 0,message:n.message||"",source:n.source||"website",consent:!!n.consent,assigned_to_employee_id:n.assigned_to_employee_id||void 0,status:n.status||void 0};try{T&&$?(await v.request(`/api/leads/${$}`,{method:"PATCH",body:t}),L({updated:$})):(await v.leads.publicSubmit(t),L({created:!0})),k(!1),H(g=>g+1),C(1)}catch(g){console.error(g),D(((a=g==null?void 0:g.data)==null?void 0:a.message)||(g==null?void 0:g.message)||"Submission failed")}finally{V(!1)}}async function we(s){var t;if(confirm("Are you sure you want to delete this inquiry? This action cannot be undone."))try{v.leads&&v.leads.remove?await v.leads.remove(s):await v.del(`/api/leads/${s}`),H(a=>a+1),C(1)}catch(a){console.error(a),alert(((t=a==null?void 0:a.data)==null?void 0:t.message)||(a==null?void 0:a.message)||"Delete failed")}}async function ee(s){var se;if(!s)return;const t=await s.text(),a=Be(t);if(!a.length)return alert("No rows found in CSV.");const g=a.length;Y(!0),U({processed:0,total:g,errors:[]});const b=[];let r=0;for(const[P,l]of a.entries()){const Ce={school_name:l.school_name||l.school||l.schoolname||"",contact_name:l.contact_name||l.contact||l.contactname||"",phone:l.phone||l.mobile||"",email:l.email||"",city:l.city||"",state:l.state||"",pincode:l.pincode||l.pin||"",students_count:l.students_count||l.students||l.students_count||"",medium_name:l.medium||l.medium_name||"",std_from_name:l.std_from||l.std_from_name||l.std_from_name||"",std_to_name:l.std_to||l.std_to_name||l.std_to_name||"",message:l.message||l.notes||l.msg||"",source:l.source||"csv-import",consent:!(l.consent==="false"||l.consent==="0")};try{const _=await v.leads.publicSubmit(Ce);_&&_.ok||b.push({row:P+1,err:(_==null?void 0:_.message)||"unknown"})}catch(_){b.push({row:P+1,err:((se=_==null?void 0:_.data)==null?void 0:se.message)||(_==null?void 0:_.message)||"error"})}r++,U(_=>({..._,processed:r}))}U(P=>({...P,errors:b})),Y(!1),H(P=>P+1),C(1),b.length?(alert(`Import completed with ${b.length} errors. See console for details.`),console.error("Import errors:",b)):alert("Import completed successfully.")}const z=o.useMemo(()=>{const s=p&&p.total||0;return Math.max(1,Math.ceil(s/(p.pageSize||N)))},[p,N]);function Se({r:s}){return e.jsxs("tr",{className:"odd:bg-white even:bg-slate-50 align-top",children:[e.jsx("td",{className:"px-4 py-3 text-base text-slate-700 font-medium",children:s.lead_id}),e.jsx("td",{className:"px-4 py-3 text-base font-medium",children:s.school_name}),e.jsxs("td",{className:"px-4 py-3 text-sm",children:[e.jsx("div",{className:"text-base font-medium",children:s.contact_name}),e.jsx("div",{className:"text-sm text-slate-500",children:s.phone})]}),e.jsx("td",{className:"px-4 py-3 text-base",children:s.email||"—"}),e.jsx("td",{className:"px-4 py-3 text-base",children:s.city||"—"}),e.jsx("td",{className:"px-4 py-3 text-base",children:s.medium||"—"}),e.jsx("td",{className:"px-4 py-3 text-base",children:e.jsx(ne,{status:s.status})}),e.jsx("td",{className:"px-4 py-3 text-base",children:K(s.created_at)}),e.jsx("td",{className:"px-4 py-3 text-base",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Le,{size:"sm",onClick:()=>ye(s.lead_id),children:"View"}),e.jsx(te,{size:"sm",onClick:()=>be(s.lead_id),children:"Edit"}),e.jsx(De,{size:"sm",onClick:()=>we(s.lead_id)})]})})]})}return e.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Inquiries"}),e.jsx("nav",{className:"text-sm text-slate-500 mt-1",children:e.jsxs("ol",{className:"list-reset flex",children:[e.jsx("li",{children:e.jsx("a",{className:"hover:text-slate-700 text-slate-500",children:"Dashboard"})}),e.jsx("li",{className:"mx-2",children:"/"}),e.jsx("li",{className:"text-slate-700 font-medium",children:"Inquiry Management"})]})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ke,{onChange:s=>{var a;const t=((a=s.target)==null?void 0:a.files)&&s.target.files[0];t&&ee(t)},children:[e.jsx(F,{name:"upload"})," Import CSV"]}),e.jsxs(te,{onClick:_e,children:[e.jsx(F,{name:"download"})," Export CSV"]}),e.jsxs(Me,{onClick:ve,children:[e.jsx(F,{name:"plus"})," Create New"]})]})]}),e.jsx("div",{className:"bg-white border rounded-lg p-4 shadow-sm mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx("div",{className:"col-span-2",children:e.jsx(h,{label:"Search",children:e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsx(F,{name:"search"}),e.jsx(y,{value:c,onChange:s=>f(s),placeholder:"Search school, contact, phone, city..."})]})})}),e.jsx("div",{children:e.jsx(h,{label:"Status",children:e.jsx(q,{value:m,onChange:s=>w(s),options:ze.map(s=>({value:s,label:s||"Any"}))})})}),e.jsx("div",{children:e.jsx(h,{label:"Date range",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"date",value:u,onChange:s=>j(s.target.value),className:"border rounded px-2 py-2 text-base w-1/2"}),e.jsx("input",{type:"date",value:S,onChange:s=>E(s.target.value),className:"border rounded px-2 py-2 text-base w-1/2"})]})})})]})}),e.jsxs("div",{className:"bg-white border rounded-lg shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 border-b flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-slate-600",children:["Showing page ",p.page||1," — ",p.total||0," results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-slate-500",children:"Page size"}),e.jsx("select",{value:N,onChange:s=>{le(Number(s.target.value)),x(1)},className:"border rounded px-3 py-2 text-sm",children:[10,20,50,100].map(s=>e.jsx("option",{value:s,children:s},s))})]})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-800 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-base font-medium",children:"ID"}),e.jsx("th",{className:"px-4 py-3 text-base font-medium",children:"School"}),e.jsx("th",{className:"px-4 py-3 text-base font-medium",children:"Contact"}),e.jsx("th",{className:"px-4 py-3 text-base font-medium",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-base font-medium",children:"City"}),e.jsx("th",{className:"px-4 py-3 text-base font-medium",children:"Medium"}),e.jsx("th",{className:"px-4 py-3 text-base font-medium",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-base font-medium",children:"Created"}),e.jsx("th",{className:"px-4 py-3 text-base font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:oe?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"p-12 text-center text-slate-500 text-lg",children:"Loading…"})}):B.length?B.map(s=>e.jsx(Se,{r:s},s.lead_id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"p-12 text-center text-slate-500 text-lg",children:"No results"})})})]})}),e.jsxs("div",{className:"px-4 py-3 border-t flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-slate-600",children:p.total?`Showing ${(p.page-1)*p.pageSize+1} - ${Math.min(p.page*p.pageSize,p.total)} of ${p.total}`:"—"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{disabled:p.page<=1,onClick:()=>{const s=Math.max(1,p.page-1);x(s),C(s)},className:"px-3 py-1 border rounded bg-white text-sm disabled:opacity-50",children:"Prev"}),e.jsx("div",{className:"text-sm",children:"Page"}),e.jsx("input",{type:"number",min:"1",max:z,value:I,onChange:s=>{const t=Math.max(1,Number(s.target.value||1));x(t),C(t)},className:"w-16 border rounded px-2 py-1 text-sm"}),e.jsxs("div",{className:"text-sm",children:["/ ",z]}),e.jsx("button",{disabled:I>=z,onClick:()=>{const s=Math.min(z,I+1);x(s),C(s)},className:"px-3 py-1 border rounded bg-white text-sm disabled:opacity-50",children:"Next"})]})]})]},fe),e.jsx("input",{type:"file",accept:".csv",ref:pe,style:{display:"none"},onChange:s=>{const t=s.target.files&&s.target.files[0];t&&ee(t),s.target.value=""}}),he&&e.jsxs("div",{className:"fixed bottom-6 right-6 bg-white border rounded-lg p-3 shadow flex flex-col gap-2 w-80",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-medium",children:"Importing CSV"}),e.jsxs("div",{className:"text-xs text-slate-500",children:[M.processed,"/",M.total]})]}),e.jsx("div",{className:"w-full bg-slate-100 h-2 rounded overflow-hidden",children:e.jsx("div",{style:{width:`${M.processed/M.total*100||0}%`},className:"h-2 bg-indigo-500"})}),M.errors&&M.errors.length>0&&e.jsxs("div",{className:"text-xs text-rose-600",children:["Errors: ",M.errors.length," (see console)"]})]}),re&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-start sm:items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/30",onClick:()=>k(!1)}),e.jsxs("div",{className:"relative z-10 w-full max-w-2xl bg-white rounded-lg shadow-lg overflow-auto max-h-[90vh]",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"/images/Ank_Logo.png",alt:"logo",className:"h-10 w-10 object-contain"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold",children:T?"Edit Inquiry":"New Inquiry"}),e.jsx("div",{className:"text-xs text-slate-400",children:"One-page form"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>k(!1),className:"text-sm text-slate-500 hover:text-slate-700",children:"Close"})})]}),e.jsxs("form",{onSubmit:Ne,className:"p-4 space-y-3",autoComplete:"off",children:[e.jsx(h,{label:"School name *",required:!0,error:!n.school_name&&A?"Required":void 0,children:e.jsx(y,{value:n.school_name,onChange:s=>d(t=>({...t,school_name:s})),placeholder:"School name"})}),e.jsx(h,{label:"Contact name *",required:!0,error:!n.contact_name&&A?"Required":void 0,children:e.jsx(y,{value:n.contact_name,onChange:s=>d(t=>({...t,contact_name:s})),placeholder:"Contact name"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(h,{label:"Phone",children:e.jsx(y,{value:n.phone,onChange:s=>d(t=>({...t,phone:s})),placeholder:"Phone"})}),e.jsx(h,{label:"Email",children:e.jsx(y,{value:n.email,onChange:s=>d(t=>({...t,email:s})),placeholder:"Email"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(h,{label:"City",children:e.jsx(y,{value:n.city,onChange:s=>d(t=>({...t,city:s}))})}),e.jsx(h,{label:"State",children:e.jsx(y,{value:n.state,onChange:s=>d(t=>({...t,state:s}))})}),e.jsx(h,{label:"Pincode",children:e.jsx(y,{value:n.pincode,onChange:s=>d(t=>({...t,pincode:s}))})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(h,{label:"Students",children:e.jsx(y,{value:n.students_count,onChange:s=>d(t=>({...t,students_count:s}))})}),e.jsx(h,{label:"Assigned to (optional)",children:e.jsx(q,{value:n.assigned_to_employee_id||"",onChange:s=>d(t=>({...t,assigned_to_employee_id:s||""})),options:[{value:"",label:"Unassigned"}].concat((de||[]).map(s=>({value:s.employee_id,label:s.full_name||s.username})))})}),e.jsx(h,{label:"Status",children:e.jsx(q,{value:n.status||"new",onChange:s=>d(t=>({...t,status:s||"new"})),options:[{value:"new",label:"new"}].concat(["contacted","qualified","converted","lost"].map(s=>({value:s,label:s})))})})]}),e.jsxs(h,{label:"Medium",children:[e.jsx(q,{value:n.medium_id||"",onChange:s=>d(t=>({...t,medium_id:s||"",medium_name:""})),options:[{value:"",label:"— choose —"}].concat((O.mediums||[]).map(s=>({value:s.medium_id,label:s.medium_name})))}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"Or type medium name"}),e.jsx(y,{value:n.medium_name,onChange:s=>d(t=>({...t,medium_name:s,medium_id:""})),placeholder:"e.g. English"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(h,{label:"Std. from",children:[e.jsx(q,{value:n.std_from_id||"",onChange:s=>d(t=>({...t,std_from_id:s||"",std_from_name:""})),options:[{value:"",label:"—"}].concat((O.standards||[]).map(s=>({value:s.std_id,label:s.std_name})))}),e.jsx(y,{value:n.std_from_name,onChange:s=>d(t=>({...t,std_from_name:s,std_from_id:""})),placeholder:"Or type standard name"})]}),e.jsxs(h,{label:"Std. to",children:[e.jsx(q,{value:n.std_to_id||"",onChange:s=>d(t=>({...t,std_to_id:s||"",std_to_name:""})),options:[{value:"",label:"—"}].concat((O.standards||[]).map(s=>({value:s.std_id,label:s.std_name})))}),e.jsx(y,{value:n.std_to_name,onChange:s=>d(t=>({...t,std_to_name:s,std_to_id:""})),placeholder:"Or type standard name"})]})]}),e.jsx(h,{label:"Message",children:e.jsx(Ee,{value:n.message,onChange:s=>d(t=>({...t,message:s})),rows:4})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ie,{checked:!!n.consent,onChange:s=>d(t=>({...t,consent:s}))}),e.jsx("div",{className:"text-sm",children:"Consent to be contacted"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{type:"submit",loading:A}),e.jsx(qe,{onClick:()=>k(!1)}),me&&e.jsx("div",{className:"text-sm text-emerald-600",children:T?"Updated":"Created"}),X&&e.jsx("div",{className:"text-sm text-rose-600",children:X})]})]})]})]}),ue&&i&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-start sm:items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/30",onClick:()=>R(!1)}),e.jsxs("div",{className:"relative z-10 w-full max-w-xl bg-white rounded-lg shadow-lg overflow-auto max-h-[90vh]",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-lg font-semibold",children:["Inquiry #",i.lead_id]}),e.jsx("div",{className:"text-xs text-slate-400",children:"View details"})]}),e.jsx("div",{children:e.jsx("button",{onClick:()=>R(!1),className:"text-sm text-slate-500",children:"Close"})})]}),e.jsxs("div",{className:"p-4 space-y-3 text-base",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"School:"})," ",i.school_name]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Contact:"})," ",i.contact_name," — ",i.phone]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",i.email||"—"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"City / State:"})," ",i.city||"—"," / ",i.state||"—"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Pincode:"})," ",i.pincode||"—"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Students:"})," ",i.students_count||"—"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Medium:"})," ",i.medium||i.medium_name||"—"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Std range:"})," ",i.std_from||i.std_from_name||"—"," — ",i.std_to||i.std_to_name||"—"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Message:"}),e.jsx("div",{className:"mt-2 text-sm text-slate-700 p-2 bg-slate-50 rounded",children:i.message||"—"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Status:"})," ",e.jsx(ne,{status:i.status})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Assigned to:"})," ",i.assigned_to_employee_id||"—"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Created:"})," ",K(i.created_at)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Updated:"})," ",K(i.updated_at)]})]})]})]})]})}export{Ae as default};
